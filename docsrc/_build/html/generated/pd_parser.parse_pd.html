<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>pd_parser.parse_pd &#8212; pd-parser 0.1 documentation</title>
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/gallery.css" />
    <link rel="stylesheet" type="text/css" href="../_static/gallery-binder.css" />
    <link rel="stylesheet" type="text/css" href="../_static/gallery-dataframe.css" />
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">
<script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js "></script>
<script type="text/javascript" src="../_static/js/jquery-fix.js "></script>
<script type="text/javascript" src="../_static/bootstrap-3.3.7/js/bootstrap.min.js "></script>
<script type="text/javascript" src="../_static/bootstrap-sphinx.js "></script>

  </head><body>

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../index.html">
          pd-parser</a>
        <span class="navbar-text navbar-version pull-left"><b></b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
                <li><a href="../auto_examples/index.html">Examples</a></li>
                <li><a href="../api.html">API</a></li>
                <li><a href="cli.html">CLI</a></li>
                <li><a href="../whats_new.html">What's new</a></li>
                <li><a href="https://github.com/alexrockhill/pd-parser">GitHub</a></li>
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"></ul>
</li>
              
            
            
            
            
            
              <li class="hidden-sm">
<div id="sourcelink">
  <a href="../_sources/generated/pd_parser.parse_pd.rst.txt"
     rel="nofollow">Source</a>
</div></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="body col-md-12 content" role="main">
      
  <div class="section" id="pd-parser-parse-pd">
<h1>pd_parser.parse_pd<a class="headerlink" href="#pd-parser-parse-pd" title="Permalink to this headline">¶</a></h1>
<dl class="py function">
<dt id="pd_parser.parse_pd">
<code class="sig-name descname">parse_pd</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">fname</span></em>, <em class="sig-param"><span class="n">pd_event_name</span><span class="o">=</span><span class="default_value">'Fixation'</span></em>, <em class="sig-param"><span class="n">behf</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">beh_col</span><span class="o">=</span><span class="default_value">'fix_onset_time'</span></em>, <em class="sig-param"><span class="n">pd_ch_names</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">exclude_shift</span><span class="o">=</span><span class="default_value">0.1</span></em>, <em class="sig-param"><span class="n">chunk</span><span class="o">=</span><span class="default_value">2</span></em>, <em class="sig-param"><span class="n">zscore</span><span class="o">=</span><span class="default_value">10</span></em>, <em class="sig-param"><span class="n">min_i</span><span class="o">=</span><span class="default_value">10</span></em>, <em class="sig-param"><span class="n">alignment_prop</span><span class="o">=</span><span class="default_value">0.1</span></em>, <em class="sig-param"><span class="n">baseline</span><span class="o">=</span><span class="default_value">0.25</span></em>, <em class="sig-param"><span class="n">overlap</span><span class="o">=</span><span class="default_value">0.25</span></em>, <em class="sig-param"><span class="n">add_events</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">overwrite</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">verbose</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pd_parser/parse_pd.html#parse_pd"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pd_parser.parse_pd" title="Permalink to this definition">¶</a></dt>
<dd><p>Parse photodiode events.</p>
<p>Parses photodiode events from a likely very corrupted channel
using behavioral data to sync events to determine which
behavioral events don’t have a match and are thus corrupted
and should be excluded (while ignoring events that look like
photodiode events but don’t match behavior)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>fname: str</strong></dt><dd><p>The filepath to the electrophysiology file (meg/eeg/ieeg).</p>
</dd>
<dt><strong>pd_event_name: str</strong></dt><dd><p>The name of the event corresponding to the photodiode.</p>
</dd>
<dt><strong>behf</strong><span class="classifier">str</span></dt><dd><p>The filepath to a tsv file with the behavioral timing.</p>
</dd>
<dt><strong>beh_col</strong><span class="classifier">str</span></dt><dd><p>The column of the behf tsv that corresponds to the events.</p>
</dd>
<dt><strong>pd_ch_names</strong><span class="classifier">list</span></dt><dd><p>Names of the channel(s) containing the photodiode data.
One channel is to be given for a common reference and
two for a bipolar reference. If no channels are provided,
the data will be plotted and the user will provide them.</p>
</dd>
<dt><strong>exclude_shift: float</strong></dt><dd><p>How many seconds different than expected from the behavior events
to exclude that event. Use <cite>find_pd_params</cite> to determine if unsure.</p>
</dd>
<dt><strong>chunk: float</strong></dt><dd><p>The size of the window to chunk the photodiode events by
should be larger than 2x the longest photodiode event.
Use <cite>find_pd_params</cite> to determine if unsure.</p>
</dd>
<dt><strong>zscore: float</strong></dt><dd><p>How large of a z-score difference to use to threshold photodiode
events. Use <cite>find_pd_params</cite> to determine if unsure.</p>
</dd>
<dt><strong>min_i: int</strong></dt><dd><p>The minimum number of samples the photodiode event must be on for.
Use <cite>find_pd_params</cite> to determine if unsure.</p>
</dd>
<dt><strong>alignment_prop</strong><span class="classifier">float</span></dt><dd><p>Proportion of events to use to score the alignment to the first event.
This number should be low to have an accurate score without the
photodiode drifting and causing unexpected alignments (and it’s
faster). e.g. for 300 behavior events and 350 photodiode events
if alignment_prop=0.05 it will probably work and will take 15
seconds, if alignment_prop=0.1 it will almost always work
and take 30 seconds and if alignment_prop=0.2 it will work
if it’s going to and take 75 seconds.</p>
</dd>
<dt><strong>baseline: float</strong></dt><dd><p>How much relative to the chunk to use to idenify the time before
the photodiode event. This should not be changed most likely
unless there is a specific reason/issue.</p>
</dd>
<dt><strong>overlap: float</strong></dt><dd><p>How much to overlap the windows of the photodiode event-finding
process. This should not be changed most likely unless there is
a specific reason/issue.</p>
</dd>
<dt><strong>add_events</strong><span class="classifier">bool</span></dt><dd><p>Whether to add the events found from the current call of <cite>parse_pd</cite>
to a events found previously (e.g. first parse with
<cite>pd_event_name=’Fixation’</cite> and then parse with
<cite>pd_event_name=’Response’</cite>.
Note: <cite>pd_parser.add_pd_relative_events</cite> will be relative to the
first event added.</p>
</dd>
<dt><strong>verbose</strong><span class="classifier">bool</span></dt><dd><p>Whether to display or supress text output on the progress
of the function.</p>
</dd>
<dt><strong>overwrite</strong><span class="classifier">bool</span></dt><dd><p>Whether to overwrite existing data if it exists.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt>events: DataFrame</dt><dd><p>A DataFrame that has a column for to the (zero)
indexed behavioral events and another column corresponding
to the time stamp of the eeg file.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2020, Alex Rockhill.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 3.2.1.<br/>
    </p>
  </div>
</footer>
  </body>
</html>